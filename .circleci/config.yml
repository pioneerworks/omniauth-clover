version: 2.1

orbs:
  hb: homebase/hb-services-orb@2

workflows:
  build-workflow:
    jobs:
      - hb/lint:
          context:
            - common
      - hb/tests:
          database: false
          context:
            - common
          filters:
            tags:
              only: /^v.*/
            branches:
              only: /.*/
      - hb/gem_release:
          requires:
            - hb/tests
            - hb/lint
          context:
            - common
          filters:
            tags:
              only: /^v.*/
            branches:
              ignore: /.*/